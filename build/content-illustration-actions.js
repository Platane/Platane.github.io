var contentIllustrationActions=function(){for(var t=DomHelper,e=function(t){var e=t.querySelector(".work-content"),n=t.querySelector(".work-illu-panel"),i=t.querySelector(".work-nav"),r=e.offsetWidth,a=t.offsetWidth,o=i.offsetWidth,l=a-o-50;e.style.width=r+"px",n.style.width=l+"px"},n=function(t){var e=t.querySelector(".work-content"),n=t.querySelector(".work-illu-panel");e.style.width=n.style.width=""},i=function(n){var i=n.querySelector(".work-content-wrapper");e(n),t.addClass(n,"illu-displayed"),t.unbind(i,"transitionEnd.clear-after-out-anim webkitTransitionEnd.clear-after-out-anim"),t.unbind(i,"click.close"),window.setTimeout(function(){t.bind(i,"click.close",function(){r(n)})},100)},r=function(e){var i=e.querySelector(".work-content-wrapper");t.removeClass(e,"illu-displayed"),t.unbind(i,"click.close"),t.bind(i,"transitionEnd.clear-after-out-anim webkitTransitionEnd.clear-after-out-anim",function(){n(e),t.unbind(i,"transitionEnd.clear-after-out-anim webkitTransitionEnd.clear-after-out-anim")})},a=function(t,e,n){var i=t.querySelector(".work-illu-primar div"),r=t.querySelector(".work-illu-caption");i.style.backgroundImage="url("+e+")",r.innerHTML=n||""},o=document.querySelectorAll(".work-illu.work-illu-secondary"),l=o.length;l--;)t.bind(o[l],"click.emphase-illu",function(){var e=t.getParent(this,"work-main");t.hasClass(e,"illu-displayed")?a(e,this.getAttribute("data-image"),this.getAttribute("data-caption")):(i(e),a(e,this.getAttribute("data-image"),this.getAttribute("data-caption"),!0))}),a(t.getParent(o[l],"work-main"),o[l].getAttribute("data-image"),o[l].getAttribute("data-caption"),!0);for(var u=document.querySelectorAll(".work-content-wrapper"),l=u.length;l--;)t.bind(u[l],"mousedown.drag",function(n){var a=this,o=t.getParent(a,"work-main"),l=n.pageX,u=t.getWidth(a);e(o),a.style.width=u+"px",t.addClass(a,"dragged");var d=(new Date).getTime();t.bind(window,"mousemove.dragging",function(t){var e=t.pageX;a.style.width=Math.max(0,u+(l-e))+"px"}),t.bind(window,"mouseup.dragging",function(){t.removeClass(a,"dragged"),t.unbind(window,"mouseup.dragging"),t.unbind(window,"mousemove.dragging"),a.style.width="",(new Date).getTime()-d<300||(t.getWidth(a)<200?i(o):r(o))})});return{open:i,close:r,changeIllu:a}}();