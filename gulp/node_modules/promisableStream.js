var Stream = require('stream').Stream
  , Promise = require('promise')


// TODO pretify this
Stream.prototype.toPromise = function( delay ){
	var pipe = this
    return new Promise(function( resolve , reject ){
        pipe
        .on('end',function(){
            setTimeout( resolve, delay || 0 )
        })
        .on('error',function(e){
            reject(e)
        })
    })
}

module.exports = Stream;
